"use strict";let a=require("utils"),b=require("api"),c=require("slider.js"),d={elements:{list:document.getElementById("pers-list"),toc:document.getElementById("toc"),tocBtn:document.getElementById("toc-btn")},init(){c.init(this.elements.list.children,{autoPlay:"0"!==a.getQuery("autoPlay"),interval:+a.getQuery("interval")||void 0}),this.fillTOC(),this.addEventHandlers(),b.emit("listPersons")},fillTOC(){let{list:e,toc:f}=this.elements;f.innerHTML=[...e.querySelectorAll(".pers-about > h2")].map((g,h)=>`<li data-idx="${h}">${g.innerHTML}</li>`).join("")},addEventHandlers(){let{list:e,toc:f,tocBtn:g}=this.elements;"0"!==a.getQuery("autoPlay")&&(e.addEventListener("mouseenter",c.pause,!1),e.addEventListener("mouseleave",c.play,!1)),g.addEventListener("click",this.tocBtnHandler.bind(this),!1),f.addEventListener("click",this.tocHandler.bind(this),!1)},tocBtnHandler(){c.pause(),this.elements.toc.classList.add("toc-show")},tocHandler({target:e}){let f=e.getAttribute("data-idx");"string"==typeof f&&c.goto(+f),this.elements.toc.classList.remove("toc-show"),"0"!==a.getQuery("autoPlay")&&c.play()}};b.init({widget:"PQM",messageData:{listPersons(){let e=new Map;return[...d.elements.list.children].forEach((f)=>{let g=f.getAttribute("data-pers"),h=f.querySelector(".pers-about > h2").textContent;e.set(g,h)}),window._babelPolyfill?[...e].reduce((f,[g,h])=>{return f[g]=h,f},{}):e}},methods:{showSlide(e){let f=[...d.elements.list.children],g=f.findIndex((h)=>h.getAttribute("data-pers")===e);-1<g&&c.goto(g)}}}),d.init(),module.exports={};